--- 
id: 008
title: Update Chatbot UI Development Plan with Milestones
stage: plan
date_iso: 2025-12-18
surface: agent
model: gemini-1.5-flash
feature: 003-docusaurus-chatbot-ui
branch: main
user: 
command: "/sp.plan Based on the approved specification for \"Phase 3: Integration of Chatbot (ChatKit) on UI\", create a detailed, milestone-driven implementation plan. Plan Structure Requirements: 1. Milestone-Based Approach: Organize the work into 4 sequential milestones. 2. Milestone 1: Frontend Project Setup & ChatKit Integration Objective: Prepare the Docusaurus project and integrate the core ChatKit UI library. Key Tasks: Audit the existing Docusaurus project structure and identify the best location for the chatbot components (e.g., src/components/chatbot/). Install the required npm packages: @openai/chatkit, axios (or confirm fetch is sufficient). Create the foundational React component structure: ChatBotProvider (context), ChatWidget (main container), MessageList, MessageInput. Integrate the basic ChatKit ChatInterface component into ChatWidget with minimal styling. Verify the component renders correctly in a standalone test page. Deliverables: A working Docusaurus environment with ChatKit installed and a basic, renderable chat component. Validation: The project builds without errors, and a test page displays the empty chat interface. 3. Milestone 2: Core Chat Logic & State Management Objective: Implement the internal state, logic, and connect to the FastAPI backend. Key Tasks: Implement the ChatBotProvider context to manage global state: messages[], isLoading, error, sessionId. Create a service module (chatService.js) with a function sendMessage(message, selectedText) that constructs and sends the POST request to the Phase 2 backend (/chat). Implement the sessionId generation (using crypto.randomUUID()) and persistence logic with sessionStorage. Connect the MessageInput component to call the sendMessage service and update the context state with user messages and AI responses. Connect the MessageList component to display messages from the context state. Implement basic loading indicators and error message displays. Dependencies: Milestone 1 must be complete. Assumes the Phase 2 backend endpoint is reachable (provide placeholder URL if not). Deliverables: A functional chat widget that can send/receive messages from the backend and maintain session state. Validation: A user can type a message, see it appear, see a loading state, and receive a simulated or real backend response in the UI. 4. Milestone 3: Advanced Features & Docusaurus Integration Objective: Implement key features (text selection) and integrate the widget into the live book. Key Tasks: Implement the \"selected text\" feature: Add a useTextSelection hook or utility that captures window.getSelection() and provides the selected string to the chat context. Modify the MessageInput component to automatically populate and visually indicate when a selectedText value is available to send. Integrate the complete ChatWidget into the main Docusaurus layout (src/theme/Layout.jsx or via swizzle). Style the widget to be a fixed-position element (e.g., bottom-right corner) with toggle (minimize/maximize) functionality. Ensure the widget's styles do not conflict with the existing Docusaurus theme. Dependencies: Milestone 2 must be complete. Deliverables: The chatbot is fully embedded in the textbook, with the selected text feature working. Validation: The chat widget is visible on all book pages. Highlighting text on the page pre-fills the chat context. The UI is visually cohesive. 5. Milestone 4: Polishing, Testing & Handoff Objective: Refine the user experience, add resilience, and prepare for the next phase. Key Tasks: Enhance error handling and user feedback (e.g., network errors, empty messages). Add comprehensive UI/UX polish: smooth animations, improved placeholder text, clearer instructions. Write basic unit tests for the context and utility functions. Perform cross-browser testing (Chrome, Firefox, Safari). Document the component API and integration steps for future phases. Verify all Acceptance Criteria from the specification are met. Dependencies: Milestone 3 must be complete. Deliverables: A robust, tested, and documented chatbot UI integrated into the Docusaurus textbook. Validation: All specified features work reliably. The code is clean, commented, and ready for Phase 4 (UI theming)."
labels: ["plan-update", "milestone-plan"]
links:
  spec: "specs/003-docusaurus-chatbot-ui/spec.md"
  ticket: "null"
  adr: "null"
  pr: "null"
files_yaml:
  - "specs/003-docusaurus-chatbot-ui/plan.md"
tests_yaml: []
prompt_text: "/sp.plan Based on the approved specification for \"Phase 3: Integration of Chatbot (ChatKit) on UI\", create a detailed, milestone-driven implementation plan. Plan Structure Requirements: 1. Milestone-Based Approach: Organize the work into 4 sequential milestones. 2. Milestone 1: Frontend Project Setup & ChatKit Integration Objective: Prepare the Docusaurus project and integrate the core ChatKit UI library. Key Tasks: Audit the existing Docusaurus project structure and identify the best location for the chatbot components (e.g., src/components/chatbot/). Install the required npm packages: @openai/chatkit, axios (or confirm fetch is sufficient). Create the foundational React component structure: ChatBotProvider (context), ChatWidget (main container), MessageList, MessageInput. Integrate the basic ChatKit ChatInterface component into ChatWidget with minimal styling. Verify the component renders correctly in a standalone test page. Deliverables: A working Docusaurus environment with ChatKit installed and a basic, renderable chat component. Validation: The project builds without errors, and a test page displays the empty chat interface. 3. Milestone 2: Core Chat Logic & State Management Objective: Implement the internal state, logic, and connect to the FastAPI backend. Key Tasks: Implement the ChatBotProvider context to manage global state: messages[], isLoading, error, sessionId. Create a service module (chatService.js) with a function sendMessage(message, selectedText) that constructs and sends the POST request to the Phase 2 backend (/chat). Implement the sessionId generation (using crypto.randomUUID()) and persistence logic with sessionStorage. Connect the MessageInput component to call the sendMessage service and update the context state with user messages and AI responses. Connect the MessageList component to display messages from the context state. Implement basic loading indicators and error message displays. Dependencies: Milestone 1 must be complete. Assumes the Phase 2 backend endpoint is reachable (provide placeholder URL if not). Deliverables: A functional chat widget that can send/receive messages from the backend and maintain session state. Validation: A user can type a message, see it appear, see a loading state, and receive a simulated or real backend response in the UI. 4. Milestone 3: Advanced Features & Docusaurus Integration Objective: Implement key features (text selection) and integrate the widget into the live book. Key Tasks: Implement the \"selected text\" feature: Add a useTextSelection hook or utility that captures window.getSelection() and provides the selected string to the chat context. Modify the MessageInput component to automatically populate and visually indicate when a selectedText value is available to send. Integrate the complete ChatWidget into the main Docusaurus layout (src/theme/Layout.jsx or via swizzle). Style the widget to be a fixed-position element (e.g., bottom-right corner) with toggle (minimize/maximize) functionality. Ensure the widget's styles do not conflict with the existing Docusaurus theme. Dependencies: Milestone 2 must be complete. Deliverables: The chatbot is fully embedded in the textbook, with the selected text feature working. Validation: The chat widget is visible on all book pages. Highlighting text on the page pre-fills the chat context. The UI is visually cohesive. 5. Milestone 4: Polishing, Testing & Handoff Objective: Refine the user experience, add resilience, and prepare for the next phase. Key Tasks: Enhance error handling and user feedback (e.g., network errors, empty messages). Add comprehensive UI/UX polish: smooth animations, improved placeholder text, clearer instructions. Write basic unit tests for the context and utility functions. Perform cross-browser testing (Chrome, Firefox, Safari). Document the component API and integration steps for future phases. Verify all Acceptance Criteria from the specification are met. Dependencies: Milestone 3 must be complete. Deliverables: A robust, tested, and documented chatbot UI integrated into the Docusaurus textbook. Validation: All specified features work reliably. The code is clean, commented, and ready for Phase 4 (UI theming)."
response_text: "I have updated the `plan.md` file with the detailed, milestone-driven plan provided by the user."
outcome: Agent updated the development plan for the Docusaurus Chatbot UI feature based on user's detailed instructions.
evaluation: 
---
